<html>
<head>
  <style type="text/less">
  #container {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    align-content: stretch;
    height: 100vh;
    width: 100vw;
  }
  
  #ta {
    flex: 1 1 auto;
  }
  </style>
</head>
<body>
  <div id="container">
    <textarea id="ta"></textarea>
    <div id="info">
      <h3>Type some text!</h3>
      <p id="detectedLang">Unknown language</p>
    </div>
  </div>
  
  <script>
  const SpellCheckHandler = require('../src/spell-check-handler');
  const ContextMenuListener = require('../src/context-menu-listener');
  const ContextMenuBuilder = require('../src/context-menu-builder');
  
  window.spellCheckHandler = new SpellCheckHandler();
  window.spellCheckHandler.attachToInput();
  window.spellCheckHandler.currentSpellcheckerChanged.subscribe(() => {
    document.getElementById('detectedLang').innerText = window.spellCheckHandler.currentSpellcheckerLanguage;
  });
  
  window.spellCheckHandler.provideHintText(document.getElementById("ta").value);
  window.spellCheckHandler.autoUnloadDictionariesOnBlur();
  
  let contextMenuBuilder = new ContextMenuBuilder(window.spellCheckHandler);
  let contextMenuListener = new ContextMenuListener(async (info) => {
    await contextMenuBuilder.showPopupMenu(info);
  });
  </script>
</body>
</html>
